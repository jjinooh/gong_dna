<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>공무원 DNA 테스트</title>
  <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
  <script>
  Kakao.init('3138aed7cfa6cb0fbdca2b0e71a77461');
  </script>

  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      width: 90vw;
      max-width: 420px;
      height: 90vh;
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      text-align: center;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .container.show {
      display: flex;
    }
    h1, h2, p {
      margin-bottom: 12px;
    }
    button {
      padding: 10px 20px;
      margin: 6px;
      font-size: 15px;
      border: none;
      border-radius: 10px;
      background: #5a8dee;
      color: white;
      cursor: pointer;
      width: 80%;
    }
    select {
      padding: 8px;
      width: 80%;
      font-size: 14px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    .comment {
      font-size: 12px;
      color: #888;
      margin-top: 8px;
    }
    #result img {
      width: 120px;
      margin-bottom: 10px;
      border-radius: 8px;
    }
  </style>
</head>
<body>
  <div class="container show" id="userinfo">
    <h2>공직 경력 체크</h2>
    <p>당신의 공직 연차를 알려주세요!</p>
    <select id="experience">
      <option value="1년 미만">🍼 1년 미만</option>
      <option value="1~3년">🌱 1~3년</option>
      <option value="4~7년">🌳 4~7년</option>
      <option value="8년 이상">🧘 8년 이상</option>
    </select>
    <button onclick="saveUserInfo()">테스트 시작하기</button>
  </div>
  
  <div class="container" id="intro">
    <h1>공무원 DNA 테스트 🧬</h1>
    <p>나는 공무원을 계속할 상인가?</p>
    <button onclick="startTest()">시작!</button>
    <div class="comment">* 본 테스트는 재미용입니다 :)</div>
  </div>
  
  <div id="questions"></div>
  
  <div class="container" id="result">
    <h2>🎯 당신의 결과는?</h2>
    <img id="resultImage" src="" alt="결과 이미지">
    <p id="resultText"></p>
    <button onclick="copyResult()">🔗 결과 복사</button>
    <button onclick="shareKakao()">💬 카카오톡 공유</button>
    <button onclick="location.reload()">🔁 다시 하기</button>
    <div class="comment" style="margin-top: 20px; font-size: 13px; color: #999;">
      Made by <strong>JINO</strong><br>
      #출근고민만100번째 #내면분투형
    </div>
  </div>
  
  <script>
    let userInfo = {};
    let answers = [];
    let currentQuestion = 0;
    let totalScore = 0;
    
        const resultTypes = [
      {
        name: '천직형 🌟',
        desc: '안정과 루틴을 사랑하는 천직형! 당신은 공직 DNA 그 자체입니다.',
        condition: a => a <= 5
      },
      {
        name: '내면 분투형 🌀',
        desc: '겉으로는 멀쩡, 속은 복잡한 고민의 연속. 늘 출근길에 생각이 많다.',
        condition: a => a <= 10
      },
      {
        name: '갈팡질팡형 🤹‍♀️',
        desc: '이직과 안정 사이에서 고민 중. 매일 출근 전 한숨을 쉰다면 당신!',
        condition: a => a <= 15
      },
      {
        name: '번아웃형 🔥',
        desc: '이미 마음은 퇴사 중... 현실은 계속 근무 중... 휴식이 필요해요!',
        condition: a => a <= 20
      },
      {
        name: '퇴사각형 💣',
        desc: '지금 안 그만두면 병날 것 같다면? 이 테스트 끝나고 바로 명상 ㄱ',
        condition: a => a <= 25
      }
    ];

    const imageMap = {
      '갈팡질팡형 🤹‍♀️': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/refs/heads/main/PENUP_20250802_063752.png',
      '퇴사각형 💣': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/refs/heads/main/PENUP_20250802_064207.png',
      '천직형 🌟': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/refs/heads/main/PENUP_20250802_070019%20(1).png',
      '번아웃형 🔥': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/refs/heads/main/PENUP_20250802_070136.png',
      '내면 분투형 🌀': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/refs/heads/main/file_000000003ab861f9b0555ad3a325e417.png'
    };

    // 점수 부여 시스템 - 각 답변에 점수 할당
    // 변경된 모든 질문과 답변이 여기에 반영됩니다.
    const optionScores = {
      // 기본 질문들 (General Questions)
      "퇴근 후 당신의 모습은?": {
        "📚 오늘도 자기계발!": 0,
        "🛏️ 침대와 혼연일체": 1,
        "🍕 넷플릭스+배달앱 콜라보": 1, // 기존과 동일하게 유지
        "🤯 회의감에 빠짐": 3
      },
      "당신이 주로 쓰는 말은?": {
        "이건 왜 이렇게 비효율적이죠?": 1,
        "결재 드렸습니다.": 0,
        "이게 다 시민을 위한 일이죠.": 0, // 기존과 동일하게 유지
        "오늘은 누가 또 터뜨렸나…": 2
      },
      "당신의 업무 몰입 스타일은?": {
        "😤 일단 끝내고 나중에 쉰다": 0,
        "🧘 중간중간 쉬는 게 중요하다": 1,
        "🤹‍♀️ 몇 가지 일을 동시에 처리한다": 1, // 기존과 동일하게 유지
        "🙈 딴짓하다 마감 직전 몰아친다": 3
      },
      "회의할 때 나는 어떤 사람?": {
        "📣 적극적으로 의견을 낸다": 0,
        "📝 메모하고 듣는 편이다": 1,
        "😓 질문 받을까 봐 조마조마": 2,
        "🙃 이미 멍 때리는 중": 3
      },
      "보고서를 쓸 때 나는?": {
        "🧐 구조부터 치밀하게 짠다": 0,
        "😓 빈 화면 앞에서 멍…": 3,
        "🙋 사례부터 긁어온다": 1,
        "😇 선배 문서 복붙 + 살짝 수정": 2
      },
      "회식 소식이 들리면?": {
        "🎉 오랜만에 사람들과 수다 떨 기회": 0,
        "🤔 누구 오는지 먼저 확인": 1,
        "😩 또 회식…": 2,
        "🙈 몰랐던 척 조용히 집 간다": 3
      },
      "\"요즘 일 어때?\"라는 친구 질문에 대한 속마음은?": {
        "😊 보람 있어": 0,
        "😕 말하면 길어": 1,
        "😩 그냥 버티는 중": 3,
        "🙄 또 그 얘기야?": 2
      },
      "나에게 공무원이라는 일은...": {
        "💼 사회를 지탱하는 책임감 있는 일": 0,
        "💸 안정적이라 선택한 생계형 직업": 1,
        "😶‍🌫️ 의미는 점점 흐려지는 중": 2,
        "🎭 일과 나를 분리한 이중생활": 3
      },
      "요즘 내 퇴사 욕구는?": {
        "💣 매우 높음 – 퇴사 각": 3,
        "🔥 가끔 욱하지만 참음": 2,
        "🧊 낮음 – 안정 최고": 1,
        "😇 없음 – 나는 공무원이 천직": 0
      },

      // 경력별 질문 (Branch Questions)
      // 1년 미만 (Newly Modified)
      "요즘 당신 입에서 자주 나오는 말은?_1년미만": { // Q2 분기문 질문 매핑을 위해 key 변경
        "제가 한번 해보겠습니다!": 0,
        "아직도 헷갈리네요...": 1,
        "매뉴얼에 없는 내용인데요?": 2,
        "왜 저는 이거 하고 있죠?": 3
      },
      "부서 이동 얘기가 나오면?_1년미만": {
        "🌟 어디든 좋으니 많이 배우고 싶어요!": 0,
        "😱 벌써요?! 정신이 없어요!": 1,
        "🤔 제가 뭘 해야 하는 건데요...?": 2,
        "💨 제발 보내주세요. 현기증 나요.": 3
      },
      "공무원 되길 잘했다고 느낄 때는?_1년미만": {
        "👩‍🏫 누군가에게 도움이 되었을 때": 0,
        "🧘 퇴근 후 저녁이 있는 삶을 누릴 때": 1,
        "💸 매월 통장에 월급이 꽂힐 때": 2,
        "💀 잘 모르겠어요. 매일이 생존이네요.": 3
      },

      // 1~3년 (Newly Modified)
      "요즘 동료들이랑은 어때?_1~3년": {
        "😀 함께하는 즐거움이 커요!": 0,
        "😌 그냥저냥 무난한 관계예요.": 1,
        "😤 서로 미루기 바쁜 관계?": 2,
        "🤬 눈치+정치+피로 그 자체입니다.": 3
      },
      "부서 이동 얘기가 나오면?_1~3년": {
        "🚀 새로운 환경에서 도전하고 싶어요!": 0,
        "🤔 그냥 익숙한 곳이 좋아요.": 1,
        "😤 또 누가 나 밀어내려는 건가?": 2,
        "💀 부서 이동이라뇨, 그만두게 해주세요.": 3
      },
      "공무원 되길 잘했다고 느낄 때는?_1~3년": {
        "📈 능력이 향상되는 걸 느낄 때": 0,
        "😎 신입들이 나를 부러워할 때": 1,
        "🏖️ 연가를 마음껏 쓸 수 있을 때": 2,
        "💔 딱히 없습니다.": 3
      },

      // 4~7년 (Newly Modified)
      "요즘 당신 입에서 자주 나오는 말은?_4~7년": { // Q2 분기문 질문 매핑을 위해 key 변경
        "오늘 일은 오늘 끝내자!": 0,
        "아~ 네. 알겠습니다.": 1,
        "이거 또 담당자 바뀔 것 같은데?": 2,
        "나 없을 때 진행해.": 3
      },
      "요즘 동료들이랑은 어때?_4~7년": {
        "😀 서로 의지하며 으쌰으쌰!": 0,
        "😌 그냥저냥 무난한 관계예요.": 1,
        "😤 서로 미루기 바쁜 관계?": 2,
        "🤬 눈치+정치+피로 그 자체입니다.": 3
      },
      "부서 이동 얘기가 나오면?_4~7년": {
        "🚀 새로운 환경에서 도전하고 싶어요!": 0,
        "🤔 그냥 익숙한 곳이 좋아요.": 1,
        "😤 또 누가 나 밀어내려는 건가?": 2,
        "💀 부서 이동이라뇨, 그만두게 해주세요.": 3
      },
      "공무원 되길 잘했다고 느낄 때는?_4~7년": {
        "📈 능력이 향상되는 걸 느낄 때": 0,
        "😎 신입들이 나를 부러워할 때": 1,
        "🏖️ 연가를 마음껏 쓸 수 있을 때": 2,
        "💔 딱히 없습니다.": 3
      },

      // 8년 이상 (Newly Modified)
      "요즘 당신 입에서 자주 나오는 말은?_8년이상": { // Q2 분기문 질문 매핑을 위해 key 변경
        "이젠 척하면 척이죠. 맡겨만 주세요!": 0,
        "어차피 매뉴얼대로 하면 다 돼요.": 1,
        "하… 또 처음부터 설명해야겠지.": 2,
        "그냥 정년만 보고 버티고 있습니다.": 3
      },
      "공직생활 8년차, 나는..._8년이상": {
        "🧘 흐름만 보면 다 보여요. 관록이죠!": 0,
        "💡 후배들 보면 문득 내 과거가 떠올라요.": 1,
        "🤔 이대로 괜찮은 걸까, 가끔 생각해요.": 2,
        "🔥 조직개혁... 내겐 의미 없는 단어예요.": 3
      },
      "부서 이동 얘기가 나오면?_8년이상": {
        "🌟 어디든 필요하면 갑니다.": 0,
        "🧘 어차피 거기서 거기입니다.": 1,
        "🤖 반복되는 인사이동... 이제 체념했습니다.": 2,
        "💨 아무 곳도 가고 싶지 않아요.": 3
      },
      "공무원 되길 잘했다고 느낄 때는?_8년이상": {
        "🤓 정책 흐름이 술술 읽힐 때": 0,
        "👏 남들이 부러워할 때": 1,
        "💰 정년이 보장될 때": 2,
        "💀 아직 그런 순간은 없네요.": 3
      }
    };

    // Q2 분기 질문 매핑 함수 업데이트
    function getQ2ByExperience(exp) {
      const defaultQ2 = {
        text: "당신이 주로 쓰는 말은?",
        options: [
          { text: "이건 왜 이렇게 비효율적이죠?", score: 1 },
          { text: "결재 드렸습니다.", score: 0 },
          { text: "이게 다 시민을 위한 일이죠.", score: 0 },
          { text: "오늘은 누가 또 터뜨렸나…", score: 2 }
        ]
      };

      // 경험 연차에 따라 Q2를 분기
      if (exp === "1년 미만") {
        return {
          text: "요즘 당신 입에서 자주 나오는 말은?",
          options: [
            { text: "제가 한번 해보겠습니다!", score: 0 },
            { text: "아직도 헷갈리네요...", score: 1 },
            { text: "매뉴얼에 없는 내용인데요?", score: 2 },
            { text: "왜 저는 이거 하고 있죠?", score: 3 }
          ]
        };
      } else if (exp === "4~7년") {
         return {
          text: "요즘 당신 입에서 자주 나오는 말은?",
          options: [
            { text: "오늘 일은 오늘 끝내자!", score: 0 },
            { text: "아~ 네. 알겠습니다.", score: 1 },
            { text: "이거 또 담당자 바뀔 것 같은데?", score: 2 },
            { text: "나 없을 때 진행해.", score: 3 }
          ]
        };
      } else if (exp === "8년 이상") {
         return {
          text: "요즘 당신 입에서 자주 나오는 말은?",
          options: [
            { text: "이젠 척하면 척이죠. 맡겨만 주세요!", score: 0 },
            { text: "어차피 매뉴얼대로 하면 다 돼요.", score: 1 },
            { text: "하… 또 처음부터 설명해야겠지.", score: 2 },
            { text: "그냥 정년만 보고 버티고 있습니다.", score: 3 }
          ]
        };
      }
      return defaultQ2; // 1~3년은 기본 Q2 사용 (혹은 별도 정의)
    }

    const baseQuestions = [
      {
        text: "퇴근 후 당신의 모습은?",
        options: [
          { text: "📚 오늘도 자기계발!", score: 0 },
          { text: "🛏️ 침대와 혼연일체", score: 1 },
          { text: "🍕 넷플릭스+배달앱 콜라보", score: 1 },
          { text: "🤯 회의감에 빠짐", score: 3 }
        ]
      },
      {
        text: "당신이 주로 쓰는 말은?", // 이 질문은 경력별로 내용이 달라집니다 (branch: true 역할을 함)
        options: [] // 옵션은 getQ2ByExperience 함수에서 동적으로 채워집니다.
      },
      { branch: true }, // 이 위치에 해당하는 질문은 아래 branchQuestions에서 가져옵니다.
      {
        text: "당신의 업무 몰입 스타일은?",
        options: [
          { text: "😤 일단 끝내고 나중에 쉰다", score: 0 },
          { text: "🧘 중간중간 쉬는 게 중요하다", score: 1 },
          { text: "🤹‍♀️ 몇 가지 일을 동시에 처리한다", score: 1 },
          { text: "🙈 딴짓하다 마감 직전 몰아친다", score: 3 }
        ]
      },
      {
        text: "회의할 때 나는 어떤 사람?",
        options: [
          { text: "📣 적극적으로 의견을 낸다", score: 0 },
          { text: "📝 메모하고 듣는 편이다", score: 1 },
          { text: "😓 질문 받을까 봐 조마조마", score: 2 },
          { text: "🙃 이미 멍 때리는 중", score: 3 }
        ]
      },
      {
        text: "보고서를 쓸 때 나는?",
        options: [
          { text: "🧐 구조부터 치밀하게 짠다", score: 0 },
          { text: "😓 빈 화면 앞에서 멍…", score: 3 },
          { text: "🙋 사례부터 긁어온다", score: 1 },
          { text: "😇 선배 문서 복붙 + 살짝 수정", score: 2 }
        ]
      },
      { branch: true }, // 이 위치에 해당하는 질문은 아래 branchQuestions에서 가져옵니다.
      {
        text: "회식 소식이 들리면?",
        options: [
          { text: "🎉 오랜만에 사람들과 수다 떨 기회", score: 0 },
          { text: "🤔 누구 오는지 먼저 확인", score: 1 },
          { text: "😩 또 회식…", score: 2 },
          { text: "🙈 몰랐던 척 조용히 집 간다", score: 3 }
        ]
      },
      {
        text: "\"요즘 일 어때?\"라는 친구 질문에 대한 속마음은?",
        options: [
          { text: "😊 보람 있어", score: 0 },
          { text: "😕 말하면 길어", score: 1 },
          { text: "😩 그냥 버티는 중", score: 3 },
          { text: "🙄 또 그 얘기야?", score: 2 }
        ]
      },
      {
        text: "나에게 공무원이라는 일은...",
        options: [
          { text: "💼 사회를 지탱하는 책임감 있는 일", score: 0 },
          { text: "💸 안정적이라 선택한 생계형 직업", score: 1 },
          { text: "😶‍🌫️ 의미는 점점 흐려지는 중", score: 2 },
          { text: "🎭 일과 나를 분리한 이중생활", score: 3 }
        ]
      },
      { branch: true }, // 이 위치에 해당하는 질문은 아래 branchQuestions에서 가져옵니다.
      {
        text: "요즘 내 퇴사 욕구는?",
        options: [
          { text: "💣 매우 높음 – 퇴사 각", score: 3 },
          { text: "🔥 가끔 욱하지만 참음", score: 2 },
          { text: "🧊 낮음 – 안정 최고", score: 1 },
          { text: "😇 없음 – 나는 공무원이 천직", score: 0 }
        ]
      }
    ];

    // 경력별 분기 질문들을 4개의 옵션으로 통일하고 점수 조절
    const branchQuestions = {
      "1년 미만": [
        // baseQuestions의 두 번째 질문 (index 1)이 대체되므로 여기에 넣지 않습니다.
        {
          text: "부서 이동 얘기가 나오면?",
          options: [
            { text: "🌟 어디든 좋으니 많이 배우고 싶어요!", score: 0 },
            { text: "😱 벌써요?! 정신이 없어요!", score: 1 },
            { text: "🤔 제가 뭘 해야 하는 건데요...?", score: 2 },
            { text: "💨 제발 보내주세요. 현기증 나요.", score: 3 }
          ]
        },
        {
          text: "공무원 되길 잘했다고 느낄 때는?",
          options: [
            { text: "👩‍🏫 누군가에게 도움이 되었을 때", score: 0 },
            { text: "🧘 퇴근 후 저녁이 있는 삶을 누릴 때", score: 1 },
            { text: "💸 매월 통장에 월급이 꽂힐 때", score: 2 },
            { text: "💀 잘 모르겠어요. 매일이 생존이네요.", score: 3 }
          ]
        }
      ],
      "1~3년": [
        {
          text: "요즘 동료들이랑은 어때?",
          options: [
            { text: "😀 함께하는 즐거움이 커요!", score: 0 },
            { text: "😌 그냥저냥 무난한 관계예요.", score: 1 },
            { text: "😤 서로 미루기 바쁜 관계?", score: 2 },
            { text: "🤬 눈치+정치+피로 그 자체입니다. 아오!", score: 3 } // 더 강한 번아웃 뉘앙스 추가
          ]
        },
        {
          text: "부서 이동 얘기가 나오면?",
          options: [
            { text: "🚀 새로운 환경에서 도전하고 싶어요!", score: 0 },
            { text: "🤔 그냥 익숙한 곳이 좋아요.", score: 1 },
            { text: "😤 또 누가 나 밀어내려는 건가?", score: 2 },
            { text: "💀 부서 이동이라뇨, 차라리 그만둘래요.", score: 3 } // 퇴사 의지 더 강하게 표현
          ]
        },
        {
          text: "공무원 되길 잘했다고 느낄 때는?",
          options: [
            { text: "📈 능력이 향상되는 걸 느낄 때", score: 0 },
            { text: "😎 신입들이 나를 부러워할 때", score: 1 },
            { text: "🏖️ 연가를 마음껏 쓸 수 있을 때", score: 2 },
            { text: "💔 딱히 없습니다. 매일이 전쟁이죠.", score: 3 } // 부정적 뉘앙스 강화
          ]
        }
      ],
      "4~7년": [
        // baseQuestions의 두 번째 질문 (index 1)이 대체되므로 여기에 넣지 않습니다.
        {
          text: "요즘 동료들이랑은 어때?",
          options: [
            { text: "😀 서로 의지하며 으쌰으쌰! 협력은 기본이죠.", score: 0 },
            { text: "😌 그냥저냥 무난한 관계예요.", score: 1 },
            { text: "😤 서로 미루기 바쁜 관계? 이젠 익숙해요.", score: 2 },
            { text: "🤬 눈치+정치+피로 그 자체. 말도 섞기 싫어요.", score: 3 } // 더 강한 번아웃 뉘앙스 추가
          ]
        },
        {
          text: "부서 이동 얘기가 나오면?",
          options: [
            { text: "🚀 새로운 환경에서 도전하고 싶어요! 능력을 보여줄 기회!", score: 0 },
            { text: "🤔 그냥 익숙한 곳이 좋아요. 큰 변화는 이제…", score: 1 },
            { text: "😤 또 누가 나 밀어내려는 건가? 피곤하네요.", score: 2 },
            { text: "💀 부서 이동이라뇨, 저한테 왜 이러세요?", score: 3 } // 감정적인 반발
          ]
        },
        {
          text: "공무원 되길 잘했다고 느낄 때는?",
          options: [
            { text: "📈 능력이 향상되고 전문가가 되는 것 같을 때", score: 0 },
            { text: "😎 신입들이 나를 선배님하고 부러워할 때", score: 1 },
            { text: "🏖️ 연가를 마음껏 쓸 수 있고 눈치 안 보일 때", score: 2 },
            { text: "💔 글쎄요... 기억이 가물가물합니다.", score: 3 } // 체념적인 뉘앙스
          ]
        }
      ],
      "8년 이상": [
        // baseQuestions의 두 번째 질문 (index 1)이 대체되므로 여기에 넣지 않습니다.
        {
          text: "공직생활 8년차, 나는...",
          options: [
            { text: "🧘 흐름만 보면 다 보여요. 관록이죠!", score: 0 },
            { text: "💡 후배들 보면 문득 내 과거가 떠올라요.", score: 1 },
            { text: "🤔 이대로 괜찮은 걸까, 가끔 생각해요.", score: 2 },
            { text: "🔥 조직개혁... 내겐 의미 없는 단어예요.", score: 3 } // 체념과 무관심
          ]
        },
        {
          text: "부서 이동 얘기가 나오면?",
          options: [
            { text: "🌟 어디든 필요하면 갑니다. 프로니까요.", score: 0 },
            { text: "🧘 어차피 거기서 거기입니다. 신경 안 써요.", score: 1 },
            { text: "🤖 반복되는 인사이동... 이제 체념했습니다.", score: 2 },
            { text: "💨 아무 곳도 가고 싶지 않아요. 좀 쉬고 싶어요.", score: 3 } // 명확한 피로감
          ]
        },
        {
          text: "공무원 되길 잘했다고 느낄 때는?",
          options: [
            { text: "🤓 정책 흐름이 술술 읽히고 능수능란할 때", score: 0 },
            { text: "👏 남들이 부러워하고 인정해 줄 때", score: 1 },
            { text: "💰 정년이 보장되고 연금 생각하면 안심이 될 때", score: 2 },
            { text: "💀 아직 그런 순간은 없네요. 찾아본 적도 없고요.", score: 3 } // 완전한 회의감
          ]
        }
      ]
    };

    function saveUserInfo() {
      const exp = document.getElementById('experience').value;
      userInfo = { experience: exp };

      // 경험 연차에 따라 baseQuestions의 두 번째 질문을 동적으로 교체
      baseQuestions[1] = getQ2ByExperience(exp);

      document.getElementById('userinfo').classList.remove('show');
      document.getElementById('intro').classList.add('show');
    }

    function startTest() {
      document.getElementById('intro').classList.remove('show');
      currentQuestion = 0;
      answers = [];
      totalScore = 0;
      showNextQuestion();
    }

    function showNextQuestion() {
      const qWrap = document.getElementById('questions');
      qWrap.innerHTML = '';

      // baseQuestions의 모든 질문을 다 처리했으면 결과 화면 표시
      if (currentQuestion >= baseQuestions.length) {
        showResult();
        return;
      }

      let qData = baseQuestions[currentQuestion];

      // branch: true 마커가 있는 경우, 해당 경력에 맞는 분기 질문을 가져옵니다.
      if (qData.branch) {
        const branchSet = branchQuestions[userInfo.experience];
        // shift()를 사용해 앞에서부터 질문을 하나씩 제거하며 사용 (baseQuestions의 branch 마커 순서와 일치하도록)
        qData = branchSet.shift();
      }

      const qDiv = document.createElement('div');
      qDiv.className = 'container show';

      const qTitle = document.createElement('p');
      qTitle.innerHTML = `<strong>Q${currentQuestion + 1}.</strong> ${qData.text}`;
      qDiv.appendChild(qTitle);

      qData.options.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option.text;
        btn.onclick = () => {
          answers.push(option.text);
          totalScore += option.score; // 점수 누적
          currentQuestion++;
          qDiv.remove();
          showNextQuestion();
        };
        qDiv.appendChild(btn);
      });

      qWrap.appendChild(qDiv);
    }

    function showResult() {
      document.getElementById('questions').innerHTML = '';
      document.getElementById('result').classList.add('show');

      // 최종 totalScore를 기반으로 결과 유형 결정
      // 조건에 맞는 첫 번째 resultType을 찾습니다.
      const result = resultTypes.find(r => totalScore <= r.condition);

      document.getElementById('resultImage').src = imageMap[result.name];
      document.getElementById('resultText').innerText = `${result.name}\n${result.desc}`;
    }

    function copyResult() {
      const text = document.getElementById('resultText').innerText;
      const url = window.location.href; // 현재 페이지 URL
      navigator.clipboard.writeText(`${text}\n\n나도 공무원 DNA 테스트 해보기 👉 ${url}`).then(() => { // 카피 문구 변경
        alert('결과와 테스트 링크가 복사되었어요! 붙여넣기로 친구들에게 공유해보세요 🎉');
      });
    }

    function shareKakao() {
      Kakao.Link.sendDefault({
        objectType: 'feed',
        content: {
          title: '나는 공무원을 계속할 상인가? 🧬', // 제목 변경
          description: document.getElementById('resultText').innerText,
          imageUrl: document.getElementById('resultImage').src,
          link: {
            mobileWebUrl: window.location.href,
            webUrl: window.location.href
          }
        },
        buttons: [
          {
            title: '테스트 해보기',
            link: {
              mobileWebUrl: window.location.href,
              webUrl: window.location.href
            }
          }
        ]
      });
    }
  </script>
</body>
</html>
