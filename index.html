<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê³µë¬´ì› DNA í…ŒìŠ¤íŠ¸</title>
  <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
  <script>
  Kakao.init('3138aed7cfa6cb0fbdca2b0e71a77461'); // JavaScript í‚¤
  </script>

  <style>
    body {
      font-family: 'Arial', sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      width: 90vw;
      max-width: 420px;
      height: 90vh;
      background: white;
      padding: 20px;
      border-radius: 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      text-align: center;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      box-sizing: border-box; /* íŒ¨ë”©ì´ ë„ˆë¹„ë¥¼ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡ ì„¤ì • */
    }
    .container.show {
      display: flex;
    }
    h1, h2, p {
      margin-bottom: 12px;
    }
    button {
      padding: 10px 20px;
      margin: 6px;
      font-size: 15px;
      border: none;
      border-radius: 10px;
      background: #5a8dee;
      color: white;
      cursor: pointer;
      width: 80%;
      max-width: 300px; /* ë²„íŠ¼ ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
    }
    select {
      padding: 8px;
      width: 80%;
      max-width: 300px;
      font-size: 14px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 15px;
    }
    .comment {
      font-size: 12px;
      color: #888;
      margin-top: 8px;
    }
    #result img {
      width: 120px;
      height: auto; /* ì´ë¯¸ì§€ ë¹„ìœ¨ ìœ ì§€ */
      margin-bottom: 10px;
      border-radius: 8px;
    }
    #resultText {
      white-space: pre-wrap; /* ì¤„ë°”ê¿ˆ ìœ ì§€ */
      margin-bottom: 20px;
      font-size: 16px;
      font-weight: bold;
      line-height: 1.5;
    }
    #questions .container {
        justify-content: flex-start; /* ì§ˆë¬¸ì€ ìƒë‹¨ì— ë°°ì¹˜ */
        padding-top: 30px;
    }
    #questions strong {
        font-size: 1.2em;
        display: block;
        margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container show" id="userinfo">
    <h2>ê³µì§ ê²½ë ¥ ì²´í¬</h2>
    <p>ë‹¹ì‹ ì˜ ê³µì§ ì—°ì°¨ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”!</p>
    <select id="experience">
      <option value="1ë…„ ë¯¸ë§Œ">ğŸ¼ 1ë…„ ë¯¸ë§Œ</option>
      <option value="1~3ë…„">ğŸŒ± 1~3ë…„</option>
      <option value="4~7ë…„">ğŸŒ³ 4~7ë…„</option>
      <option value="8ë…„ ì´ìƒ">ğŸ§˜ 8ë…„ ì´ìƒ</option>
    </select>
    <button onclick="saveUserInfo()">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
  </div>
  
  <div class="container" id="intro">
    <h1>ê³µë¬´ì› DNA í…ŒìŠ¤íŠ¸ ğŸ§¬</h1>
    <p>ë‚˜ëŠ” ê³µë¬´ì›ì„ ê³„ì†í•  ìƒì¸ê°€?</p>
    <button onclick="startTest()">ì‹œì‘!</button>
    <div class="comment">* ë³¸ í…ŒìŠ¤íŠ¸ëŠ” ì¬ë¯¸ìš©ì…ë‹ˆë‹¤ :)</div>
  </div>
  
  <div id="questions"></div>
  
  <div class="container" id="result">
    <h2>ğŸ¯ ë‹¹ì‹ ì˜ ê²°ê³¼ëŠ”?</h2>
    <img id="resultImage" src="" alt="ê²°ê³¼ ì´ë¯¸ì§€">
    <p id="resultText"></p>
    <button onclick="copyResult()">ğŸ”— ê²°ê³¼ ë³µì‚¬</button>
    <button onclick="shareKakao()">ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ê³µìœ </button>
    <button onclick="location.reload()">ğŸ” ë‹¤ì‹œ í•˜ê¸°</button>
    <!-- ë§Œë“  ì‚¬ëŒ ì •ë³´ -->
    <div class="comment" style="margin-top: 20px; font-size: 13px; color: #999;">
      Made by <strong>JINO</strong><br>
      #ì¶œê·¼ê³ ë¯¼ë§Œ100ë²ˆì§¸ #ë‚´ë©´ë¶„íˆ¬í˜•
    </div>
  </div>
  
  <script>
    let userInfo = {};
    let answers = [];
    let currentQuestion = 0;
    
    // ê° ë‹µë³€ë§ˆë‹¤ ì ìˆ˜ë¥¼ ì§ì ‘ ë¶€ì—¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½ (ìŠ¤ì½”ì–´ê°€ ë†’ì„ìˆ˜ë¡ ë²ˆì•„ì›ƒ/í‡´ì‚¬í˜•ì— ê°€ê¹Œì›€)
    const baseQuestions = [
      { 
        text: "í‡´ê·¼ í›„ ë‹¹ì‹ ì˜ ëª¨ìŠµì€?", 
        options: [
          { text: "ğŸ“š ì˜¤ëŠ˜ë„ ìê¸°ê³„ë°œ!", score: 0 },
          { text: "ğŸ›ï¸ ì¹¨ëŒ€ì™€ í˜¼ì—°ì¼ì²´", score: 1 },
          { text: "ğŸ• ë„·í”Œë¦­ìŠ¤+ë°°ë‹¬ì•± ì½œë¼ë³´", score: 2 },
          { text: "ğŸ¤¯ íšŒì˜ê°ì— ë¹ ì§", score: 3 }
        ] 
      },
      { 
        text: "ë‹¹ì‹ ì´ ì£¼ë¡œ ì“°ëŠ” ë§ì€?", 
        options: [
          { text: "ì´ê±´ ì™œ ì´ë ‡ê²Œ ë¹„íš¨ìœ¨ì ì´ì£ ?", score: 1 },
          { text: "ê²°ì¬ ë“œë ¸ìŠµë‹ˆë‹¤.", score: 0 },
          { text: "ì´ê²Œ ë‹¤ ì‹œë¯¼ì„ ìœ„í•œ ì¼ì´ì£ .", score: 0 },
          { text: "ì˜¤ëŠ˜ì€ ëˆ„ê°€ ë˜ í„°ëœ¨ë ¸ë‚˜â€¦", score: 2 }
        ] 
      },
      { branch: true, key: "q2Map" }, /* q2Mapì—ì„œ í•´ë‹¹ ì—°ì°¨ ì§ˆë¬¸ ê°€ì ¸ì˜´ */
      { 
        text: "ë‹¹ì‹ ì˜ ì—…ë¬´ ëª°ì… ìŠ¤íƒ€ì¼ì€?", 
        options: [
          { text: "ğŸ˜¤ ì¼ë‹¨ ëë‚´ê³  ë‚˜ì¤‘ì— ì‰°ë‹¤", score: 0 },
          { text: "ğŸ§˜ ì¤‘ê°„ì¤‘ê°„ ì‰¬ëŠ” ê²Œ ì¤‘ìš”í•˜ë‹¤", score: 1 },
          { text: "ğŸ¤¹â€â™€ï¸ ëª‡ ê°€ì§€ ì¼ì„ ë™ì‹œì— ì²˜ë¦¬í•œë‹¤", score: 1 },
          { text: "ğŸ™ˆ ë”´ì§“í•˜ë‹¤ ë§ˆê° ì§ì „ ëª°ì•„ì¹œë‹¤", score: 3 }
        ] 
      },
      { 
        text: "íšŒì˜í•  ë•Œ ë‚˜ëŠ” ì–´ë–¤ ì‚¬ëŒ?", 
        options: [
          { text: "ğŸ“£ ì ê·¹ì ìœ¼ë¡œ ì˜ê²¬ì„ ë‚¸ë‹¤", score: 0 },
          { text: "ğŸ“ ë©”ëª¨í•˜ê³  ë“£ëŠ” í¸ì´ë‹¤", score: 1 },
          { text: "ğŸ˜“ ì§ˆë¬¸ ë°›ì„ê¹Œ ë´ ì¡°ë§ˆì¡°ë§ˆ", score: 2 },
          { text: "ğŸ™ƒ ì´ë¯¸ ë© ë•Œë¦¬ëŠ” ì¤‘", score: 3 }
        ] 
      },
      { 
        text: "ë³´ê³ ì„œë¥¼ ì“¸ ë•Œ ë‚˜ëŠ”?", 
        options: [
          { text: "ğŸ§ êµ¬ì¡°ë¶€í„° ì¹˜ë°€í•˜ê²Œ ì§ ë‹¤", score: 0 },
          { text: "ğŸ˜“ ë¹ˆ í™”ë©´ ì•ì—ì„œ ë©â€¦", score: 2 },
          { text: "ğŸ™‹ ì‚¬ë¡€ë¶€í„° ê¸ì–´ì˜¨ë‹¤", score: 1 },
          { text: "ğŸ˜‡ ì„ ë°° ë¬¸ì„œ ë³µë¶™ + ì‚´ì§ ìˆ˜ì •", score: 2 }
        ] 
      },
      { branch: true, key: "branchQuestions" }, /* branchQuestionsì—ì„œ í•´ë‹¹ ì—°ì°¨ ì§ˆë¬¸ ê°€ì ¸ì˜´ */
      { 
        text: "íšŒì‹ ì†Œì‹ì´ ë“¤ë¦¬ë©´?", 
        options: [
          { text: "ğŸ‰ ì˜¤ëœë§Œì— ì‚¬ëŒë“¤ê³¼ ìˆ˜ë‹¤ ë–¨ ê¸°íšŒ", score: 0 },
          { text: "ğŸ¤” ëˆ„êµ¬ ì˜¤ëŠ”ì§€ ë¨¼ì € í™•ì¸", score: 1 },
          { text: "ğŸ˜© ë˜ íšŒì‹â€¦", score: 2 },
          { text: "ğŸ™ˆ ëª°ëë˜ ì²™ ì¡°ìš©íˆ ì§‘ ê°„ë‹¤", score: 3 }
        ] 
      },
      { 
        text: "\"ìš”ì¦˜ ì¼ ì–´ë•Œ?\"ë¼ëŠ” ì¹œêµ¬ ì§ˆë¬¸ì— ëŒ€í•œ ì†ë§ˆìŒì€?", 
        options: [
          { text: "ğŸ˜Š ë³´ëŒ ìˆì–´", score: 0 },
          { text: "ğŸ˜• ë§í•˜ë©´ ê¸¸ì–´", score: 1 },
          { text: "ğŸ˜© ê·¸ëƒ¥ ë²„í‹°ëŠ” ì¤‘", score: 2 },
          { text: "ğŸ™„ ë˜ ê·¸ ì–˜ê¸°ì•¼?", score: 3 }
        ] 
      },
      { 
        text: "ë‚˜ì—ê²Œ ê³µë¬´ì›ì´ë¼ëŠ” ì¼ì€...", 
        options: [
          { text: "ğŸ’¼ ì‚¬íšŒë¥¼ ì§€íƒ±í•˜ëŠ” ì±…ì„ê° ìˆëŠ” ì¼", score: 0 },
          { text: "ğŸ’¸ ì•ˆì •ì ì´ë¼ ì„ íƒí•œ ìƒê³„í˜• ì§ì—…", score: 1 },
          { text: "ğŸ˜¶â€ğŸŒ«ï¸ ì˜ë¯¸ëŠ” ì ì  íë ¤ì§€ëŠ” ì¤‘", score: 2 },
          { text: "ğŸ­ ì¼ê³¼ ë‚˜ë¥¼ ë¶„ë¦¬í•œ ì´ì¤‘ìƒí™œ", score: 3 }
        ] 
      },
      { branch: true, key: "branchQuestions2" }, /* ì¶”ê°€ ë¶„ê¸° ì§ˆë¬¸ í•„ìš” ì‹œ */
      { 
        text: "ìš”ì¦˜ ë‚´ í‡´ì‚¬ ìš•êµ¬ëŠ”?", 
        options: [
          { text: "ğŸ’£ ë§¤ìš° ë†’ìŒ â€“ í‡´ì‚¬ ê°", score: 3 },
          { text: "ğŸ”¥ ê°€ë” ìš±í•˜ì§€ë§Œ ì°¸ìŒ", score: 2 },
          { text: "ğŸ§Š ë‚®ìŒ â€“ ì•ˆì • ìµœê³ ", score: 1 },
          { text: "ğŸ˜‡ ì—†ìŒ â€“ ë‚˜ëŠ” ê³µë¬´ì›ì´ ì²œì§", score: 0 }
        ] 
      }
    ];

    // ì—°ì°¨ë³„ ê³ ìœ  ì§ˆë¬¸ (q2Map) - ì˜µì…˜ì— ì ìˆ˜ ì§ì ‘ ë¶€ì—¬
    const q2Map = {
      "1ë…„ ë¯¸ë§Œ": {
        text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
        options: [
          { text: "ì•„ì§ë„ í—·ê°ˆë ¤ìš”...", score: 1 },
          { text: "í˜¹ì‹œ ì´ê²ƒë„ ì œê°€ í• ê¹Œìš”?", score: 0 },
          { text: "ë§¤ë‰´ì–¼ì´ë‘ ì‹¤ì œê°€ ë„ˆë¬´ ë‹¬ë¼ìš”", score: 2 },
          { text: "ì˜¤â€¦ì´ê±¸ ì €í•œí…Œìš”?", score: 1 }
        ]
      },
      "1~3ë…„": {
        text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
        options: [
          { text: "ê·¸ê±´ ì œê°€ ë‹´ë‹¹ì´ ì•„ë‹Œë°ìš”â€¦", score: 1 },
          { text: "ê²°ì¬ ë“œë ¸ìŠµë‹ˆë‹¤", score: 0 },
          { text: "ì´ê±° ì™œ ë˜ ë°”ê¼ˆì–´ìš”?", score: 2 },
          { text: "ë§¤ë‰´ì–¼ ì–´ë”” ìˆì–´ìš”?", score: 1 }
        ]
      },
      "4~7ë…„": {
        text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
        options: [
          { text: "ê·¸ê±´ ì œê°€ ë‹´ë‹¹ì´ ì•„ë‹Œë°ìš”â€¦", score: 1 },
          { text: "ê²°ì¬ ë“œë ¸ìŠµë‹ˆë‹¤", score: 0 },
          { text: "ì´ê±° ì™œ ë˜ ë°”ê¼ˆì–´ìš”?", score: 2 },
          { text: "ë§¤ë‰´ì–¼ ì–´ë”” ìˆì–´ìš”?", score: 1 }
        ]
      },
      "8ë…„ ì´ìƒ": {
        text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
        options: [
          { text: "ê·¸ê±° ì˜›ë‚ ì—ë„ ë¬¸ì œ ìˆì—ˆì–´", score: 1 },
          { text: "ë‚´ê°€ ë§í–ˆì–ì•„ ê·¸ë•Œ", score: 1 },
          { text: "ë˜ ë°”ë€Œì—ˆëŒ€ìš”. ì§€ì¹¨ ë‚´ë ¤ì˜¨ëŒ€", score: 1 },
          { text: "ì•ˆ ê·¸ë˜ë„ ë³´ê³  ìˆì—ˆì–´ìš”", score: 0 }
        ]
      }
    };

    // ì—°ì°¨ë³„ ë¶„ê¸° ì§ˆë¬¸ (branchQuestions) - ì˜µì…˜ì— ì ìˆ˜ ì§ì ‘ ë¶€ì—¬
    const branchQuestions = {
      "1ë…„ ë¯¸ë§Œ": [
        { 
          text: "ìš”ì¦˜ ê³µì§ìƒí™œ ì–´ë•Œ?", 
          options: [
            { text: "ğŸ™ƒ ì•„ì§ ì ì‘ ì¤‘ì´ì—ìš”", score: 1 },
            { text: "ğŸ¤¯ ë²Œì¨ í‡´ì‚¬ê°", score: 3 },
            { text: "ğŸ¤“ ìƒˆë¡œ ë°°ìš°ëŠ” ê²Œ ì¬ë°Œì–´ìš”", score: 0 }
          ] 
        },
        { 
          text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
          options: [
            { text: "ğŸ˜± ë²Œì¨ìš”?!", score: 1 },
            { text: "ğŸ¤” ê·¸ëƒ¥ ë³´ë‚´ì£¼ì„¸ìš”...", score: 2 },
            { text: "ğŸ§­ ì•„ì§ ì—¬ê¸´ ì–´ë”” ë‚˜ëŠ” ëˆ„êµ¬", score: 1 }
          ] 
        },
        { 
          text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
          options: [
            { text: "ğŸ“… ì›”ê¸‰ì¼", score: 1 },
            { text: "ğŸ§˜ ì£¼ë§ì— ì¶œê·¼ ì•ˆ í•  ë•Œ", score: 1 },
            { text: "ğŸ™‹ ì•„ì§ì€ ëª¨ë¥´ê² ì–´ìš”", score: 2 }
          ] 
        }
      ],
      "1~3ë…„": [
        { 
          text: "ìš”ì¦˜ ë™ë£Œë“¤ì´ë‘ì€ ì–´ë•Œ?", 
          options: [
            { text: "ğŸ˜Œ ê·¸ëƒ¥ì €ëƒ¥ ë¬´ë‚œ", score: 1 },
            { text: "ğŸ¤¬ ëˆˆì¹˜+ì •ì¹˜+í”¼ë¡œ ê·¸ ìì²´", score: 3 },
            { text: "ğŸ™ƒ ì¶œê·¼ë§Œ ë”°ë¡œ í•˜ê³  ì‹¶ì–´ìš”", score: 2 }
          ] 
        },
        { 
          text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
          options: [
            { text: "ğŸ§³ ë‹¤ë¥¸ ë¶€ì„œë„ ê°€ë³´ê³  ì‹¶ê¸´ í•¨", score: 1 },
            { text: "ğŸ˜¤ ëˆ„ê°€ ë‚˜ ë°€ì–´ë‚´ëŠ” ê±´ê°€?", score: 2 },
            { text: "ğŸ™ƒ ìµìˆ™í•œ ê²Œ ì¢‹ì•„ìš”", score: 0 }
          ] 
        },
        { 
          text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
          options: [
            { text: "ğŸ–ï¸ ì—°ê°€ ì“¸ ë•Œ", score: 1 },
            { text: "ğŸ˜ ì‹ ì…ë“¤ì´ ë¶€ëŸ¬ì›Œí•  ë•Œ", score: 0 },
            { text: "ğŸ§¾ ì œë„ë‚˜ ì ˆì°¨ ì˜ ì´í•´ë  ë•Œ", score: 0 }
          ] 
        }
      ],
      "4~7ë…„": [
        { 
          text: "ìš”ì¦˜ ë™ë£Œë“¤ì´ë‘ì€ ì–´ë•Œ?", 
          options: [
            { text: "ğŸ˜Œ ê·¸ëƒ¥ì €ëƒ¥ ë¬´ë‚œ", score: 1 },
            { text: "ğŸ¤¬ ëˆˆì¹˜+ì •ì¹˜+í”¼ë¡œ ê·¸ ìì²´", score: 3 },
            { text: "ğŸ™ƒ ì¶œê·¼ë§Œ ë”°ë¡œ í•˜ê³  ì‹¶ì–´ìš”", score: 2 }
          ] 
        },
        { 
          text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
          options: [
            { text: "ğŸ§³ ë‹¤ë¥¸ ë¶€ì„œë„ ê°€ë³´ê³  ì‹¶ê¸´ í•¨", score: 1 },
            { text: "ğŸ˜¤ ëˆ„ê°€ ë‚˜ ë°€ì–´ë‚´ëŠ” ê±´ê°€?", score: 2 },
            { text: "ğŸ™ƒ ìµìˆ™í•œ ê²Œ ì¢‹ì•„ìš”", score: 0 }
          ] 
        },
        { 
          text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
          options: [
            { text: "ğŸ–ï¸ ì—°ê°€ ì“¸ ë•Œ", score: 1 },
            { text: "ğŸ˜ ì‹ ì…ë“¤ì´ ë¶€ëŸ¬ì›Œí•  ë•Œ", score: 0 },
            { text: "ğŸ§¾ ì œë„ë‚˜ ì ˆì°¨ ì˜ ì´í•´ë  ë•Œ", score: 0 }
          ] 
        }
      ],
      "8ë…„ ì´ìƒ": [
        { 
          text: "ê³µì§ìƒí™œ 8ë…„ì°¨, ë‚˜ëŠ”...", 
          options: [
            { text: "ğŸ§˜ íë¦„ë§Œ ë³´ë©´ ë‹¤ ë³´ì—¬ìš”", score: 0 },
            { text: "ğŸ¤• í›„ë°°ë“¤ ë³´ë©´ ë‚´ê°€ ì˜›ë‚  ìƒê°ë‚˜ìš”", score: 1 },
            { text: "ğŸ”¥ ì¡°ì§ê°œí˜ì˜ ë¶ˆê½ƒì„ ë‹¤ì‹œ ì¼¤ê¹Œ?", score: 2 }
          ] 
        },
        { 
          text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
          options: [
            { text: "ğŸ§˜ ì–´ë””ë“  ìƒê´€ì—†ìŠµë‹ˆë‹¤", score: 0 },
            { text: "ğŸ¤– ì–´ì°¨í”¼ ë‹¤ ê±°ê¸°ì„œ ê±°ê¸°", score: 2 },
            { text: "ğŸ” ë°˜ë³µë˜ëŠ” ì¸ì‚¬ì´ë™â€¦ ì´ì œ ì²´ë…", score: 3 }
          ] 
        },
        { 
          text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
          options: [
            { text: "ğŸ‘ ë‚¨ë“¤ì´ ë¶€ëŸ¬ì›Œí•  ë•Œ", score: 0 },
            { text: "ğŸ¤“ ì •ì±… íë¦„ì´ ìˆ ìˆ  ì½í ë•Œ", score: 0 },
            { text: "ğŸ’° ì •ë…„ì´ ë³´ì¥ë  ë•Œ", score: 1 }
          ] 
        }
      ]
    };
    
    // ì´ ë¶€ë¶„ì€ ì¶”ê°€ì ì¸ ë¶„ê¸° ì§ˆë¬¸ì´ í•„ìš”í•  ê²½ìš° ì‚¬ìš©í•©ë‹ˆë‹¤. (í˜„ì¬ ì‚¬ìš© ì•ˆ í•¨)
    const branchQuestions2 = {
        "1ë…„ ë¯¸ë§Œ": [
            { text: "ì¶”ê°€ 1-1", options: [{ text: "ì„ íƒ1", score:0}, {text: "ì„ íƒ2", score:1}] }
        ],
        // ... ë‚˜ë¨¸ì§€ ì—°ì°¨ë³„ ì§ˆë¬¸
    };


    // ê²°ê³¼ ìœ í˜•ì˜ ì¡°ê±´ (ì ìˆ˜ ë²”ìœ„ ì¡°ì •)
    const resultTypes = [
      {
        name: 'ì²œì§í˜• ğŸŒŸ',
        desc: 'ì•ˆì •ê³¼ ë£¨í‹´ì„ ì‚¬ë‘í•˜ëŠ” ì²œì§í˜•! ë‹¹ì‹ ì€ ê³µì§ DNA ê·¸ ìì²´ì…ë‹ˆë‹¤.',
        condition: a => a <= 5 // 5ì  ì´í•˜ëŠ” ì²œì§í˜•
      },
      {
        name: 'ë‚´ë©´ ë¶„íˆ¬í˜• ğŸŒ€',
        desc: 'ê²‰ìœ¼ë¡œëŠ” ë©€ì©¡, ì†ì€ ë³µì¡í•œ ê³ ë¯¼ì˜ ì—°ì†. ëŠ˜ ì¶œê·¼ê¸¸ì— ìƒê°ì´ ë§ë‹¤.',
        condition: a => a > 5 && a <= 10 // 6~10ì ì€ ë‚´ë©´ ë¶„íˆ¬í˜•
      },
      {
        name: 'ê°ˆíŒ¡ì§ˆíŒ¡í˜• ğŸ¤¹â€â™€ï¸',
        desc: 'ì´ì§ê³¼ ì•ˆì • ì‚¬ì´ì—ì„œ ê³ ë¯¼ ì¤‘. ë§¤ì¼ ì¶œê·¼ ì „ í•œìˆ¨ì„ ì‰°ë‹¤ë©´ ë‹¹ì‹ !',
        condition: a => a > 10 && a <= 15 // 11~15ì ì€ ê°ˆíŒ¡ì§ˆíŒ¡í˜•
      },
      {
        name: 'ë²ˆì•„ì›ƒí˜• ğŸ”¥',
        desc: 'ì´ë¯¸ ë§ˆìŒì€ í‡´ì‚¬ ì¤‘... í˜„ì‹¤ì€ ê³„ì† ê·¼ë¬´ ì¤‘... íœ´ì‹ì´ í•„ìš”í•´ìš”!',
        condition: a => a > 15 && a <= 20 // 16~20ì ì€ ë²ˆì•„ì›ƒí˜•
      },
      {
        name: 'í‡´ì‚¬ê°í˜• ğŸ’£',
        desc: 'ì§€ê¸ˆ ì•ˆ ê·¸ë§Œë‘ë©´ ë³‘ë‚  ê²ƒ ê°™ë‹¤ë©´? ì´ í…ŒìŠ¤íŠ¸ ëë‚˜ê³  ë°”ë¡œ ëª…ìƒ ã„±',
        condition: a => a > 20 // 21ì  ì´ìƒì€ í‡´ì‚¬ê°í˜•
      }
    ];

    // ê²°ê³¼ ì´ë¯¸ì§€ ë§¤í•‘ (GitHub ë ˆí¬ì—ì„œ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤)
    const imageMap = {
      'ê°ˆíŒ¡ì§ˆíŒ¡í˜• ğŸ¤¹â€â™€ï¸': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/main/PENUP_20250802_063752.png',
      'í‡´ì‚¬ê°í˜• ğŸ’£': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/main/PENUP_20250802_064207.png',
      'ì²œì§í˜• ğŸŒŸ': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/main/PENUP_20250802_070019%20(1).png',
      'ë²ˆì•„ì›ƒí˜• ğŸ”¥': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/main/PENUP_20250802_070136.png',
      'ë‚´ë©´ ë¶„íˆ¬í˜• ğŸŒ€': 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/main/file_000000003ab861f9b0555ad3a325e417.png'
    };
    
    // ì‹œì‘ í•¨ìˆ˜
    function startTest() {
      document.getElementById('intro').classList.remove('show');
      showNextQuestion();
    }

    // ìœ ì € ì •ë³´ ì €ì¥ ë° í…ŒìŠ¤íŠ¸ ì‹œì‘ ì¤€ë¹„
    function saveUserInfo() {
      const exp = document.getElementById('experience').value;
      userInfo = { experience: exp };
      
      // Q2 ì§ˆë¬¸ì„ q2Mapì—ì„œ ê°€ì ¸ì™€ baseQuestionsì˜ 2ë²ˆì§¸(index 2) í•­ëª©ì— ëŒ€ì²´
      const q2Data = q2Map[exp];
      if (q2Data) {
          baseQuestions[2] = {
              text: q2Data.text,
              options: q2Data.options // q2Mapì˜ ì˜µì…˜ì€ ì´ë¯¸ ì ìˆ˜ í¬í•¨
          };
      } else {
          // q2Dataê°€ ì—†ì„ ê²½ìš°ì˜ ê¸°ë³¸ê°’ ë˜ëŠ” ì˜¤ë¥˜ ì²˜ë¦¬
          console.error("q2Data for experience not found:", exp);
      }

      document.getElementById('userinfo').classList.remove('show');
      document.getElementById('intro').classList.add('show');
    }

    // ë‹¤ìŒ ì§ˆë¬¸ í‘œì‹œ í•¨ìˆ˜
    function showNextQuestion() {
      const qWrap = document.getElementById('questions');
      qWrap.innerHTML = ''; // ê¸°ì¡´ ì§ˆë¬¸ ì œê±°
    
      if (currentQuestion >= baseQuestions.length) {
        showResult(); // ëª¨ë“  ì§ˆë¬¸ì´ ëë‚˜ë©´ ê²°ê³¼ í‘œì‹œ
        return;
      }
    
      let currentQData = baseQuestions[currentQuestion];
      let finalQ = currentQData; // ìµœì¢…ì ìœ¼ë¡œ í‘œì‹œí•  ì§ˆë¬¸ ë°ì´í„°

      // 'branch' ì†ì„±ì´ trueì´ë©´ í•´ë‹¹ ì—°ì°¨ì˜ ë¶„ê¸° ì§ˆë¬¸ì„ ê°€ì ¸ì˜´
      if (currentQData.branch) {
        if (currentQData.key === "q2Map") {
             // Q2 ì§ˆë¬¸ì€ ì´ë¯¸ saveUserInfoì—ì„œ baseQuestions[2]ì— ë„£ì–´ë‘ì—ˆìœ¼ë¯€ë¡œ ë”°ë¡œ ì²˜ë¦¬í•  í•„ìš” ì—†ìŒ.
             // ë‹¤ë§Œ currentQData.branchê°€ trueì´ê³  keyê°€ "q2Map"ì¸ ê²½ìš° ì´ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ì•Šë„ë¡ í•´ì•¼ í•¨.
             // ì´ ë¡œì§ì€ baseQuestions ì •ì˜ ì‹œ ì´ë¯¸ q2Map ë°ì´í„°ê°€ ì£¼ì…ëœ í›„ ì‹¤í–‰ë˜ë¯€ë¡œ, ì´ branchë¥¼ ì²˜ë¦¬í•˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.
             // Q2ëŠ” `baseQuestions` ë°°ì—´ ë‚´ì—ì„œ ì‹¤ì œ ë°ì´í„°ë¡œ ëŒ€ì²´ë˜ì—ˆìœ¼ë¯€ë¡œ,
             // ì´ `if` ë¸”ë¡ì„ í†µê³¼í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ ë§ìŠµë‹ˆë‹¤.
        } else if (currentQData.key === "branchQuestions" && branchQuestions[userInfo.experience]) {
            // í•´ë‹¹ ì—°ì°¨ì˜ ë¶„ê¸° ì§ˆë¬¸ì´ ìˆìœ¼ë©´ ê°€ì ¸ì˜¤ê³ , ì—†ìœ¼ë©´ ê¸°ë³¸ baseQuestionsë¥¼ ìœ ì§€
            if (branchQuestions[userInfo.experience].length > 0) {
                // í•œ ë²ˆ ì‚¬ìš©ëœ ë¶„ê¸° ì§ˆë¬¸ì€ ë°°ì—´ì—ì„œ ì œê±° (shift)
                finalQ = branchQuestions[userInfo.experience].shift();
            } else {
                // í•´ë‹¹ ì—°ì°¨ì— ë” ì´ìƒ ë¶„ê¸° ì§ˆë¬¸ì´ ì—†ìœ¼ë©´ ë‹¤ìŒ ê¸°ë³¸ ì§ˆë¬¸ìœ¼ë¡œ ë„˜ì–´ê°
                currentQuestion++;
                showNextQuestion();
                return;
            }
        } else if (currentQData.key === "branchQuestions2" && branchQuestions2[userInfo.experience]) {
            if (branchQuestions2[userInfo.experience].length > 0) {
                finalQ = branchQuestions2[userInfo.experience].shift();
            } else {
                currentQuestion++;
                showNextQuestion();
                return;
            }
        }
      }

      // ì§ˆë¬¸ DOM ìš”ì†Œ ìƒì„± ë° ì¶”ê°€
      const qDiv = document.createElement('div');
      qDiv.className = 'container show'; // ìƒˆë¡œìš´ ì§ˆë¬¸ ì»¨í…Œì´ë„ˆ í‘œì‹œ

      const qTitle = document.createElement('p');
      qTitle.innerHTML = `<strong>Q${currentQuestion + 1}.</strong> ${finalQ.text}`;
      qDiv.appendChild(qTitle);

      // ì˜µì…˜ ë²„íŠ¼ ìƒì„± (ìƒˆë¡œìš´ ì ìˆ˜ ì²´ê³„ ì˜µì…˜ ê°ì²´ ë°°ì—´ í˜•ì‹ë§Œ ì²˜ë¦¬)
      finalQ.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.innerText = opt.text;
        btn.onclick = () => {
          answers.push(opt); // ì„ íƒëœ ì˜µì…˜ ê°ì²´ (textì™€ score í¬í•¨) ì €ì¥
          currentQuestion++;
          qDiv.remove(); // í˜„ì¬ ì§ˆë¬¸ ì»¨í…Œì´ë„ˆ ì œê±°
          showNextQuestion(); // ë‹¤ìŒ ì§ˆë¬¸ í‘œì‹œ
        };
        qDiv.appendChild(btn);
      });

      qWrap.appendChild(qDiv);
      // í˜„ì¬ ì§ˆë¬¸ ì»¨í…Œì´ë„ˆê°€ questions div ì•ˆì— ë“¤ì–´ê°€ê²Œ ì„¤ì •ë˜ì—ˆìœ¼ë¯€ë¡œ, qWrapì„ ì§ì ‘ show í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤.
      // qWrap.classList.add('show');
    }

    // ê²°ê³¼ ê³„ì‚° ë° í‘œì‹œ í•¨ìˆ˜
    function showResult() {
      document.getElementById('questions').innerHTML = ''; // ì§ˆë¬¸ ì˜ì—­ ë¹„ìš°ê¸°
      document.getElementById('result').classList.add('show'); // ê²°ê³¼ ì»¨í…Œì´ë„ˆ í‘œì‹œ
    
      // ì´ì  ê³„ì‚°
      let totalScore = 0;
      answers.forEach(answer => {
        // answers ë°°ì—´ì—ëŠ” { text: "...", score: ... } í˜•íƒœì˜ ê°ì²´ê°€ ì €ì¥ë©ë‹ˆë‹¤.
        if (typeof answer === 'object' && 'score' in answer) {
          totalScore += answer.score;
        }
        // ì˜ˆì „ ë°©ì‹ì˜ ë¬¸ìì—´ë§Œ ì €ì¥ëœ ê²½ìš°ë¥¼ ìœ„í•œ í˜¸í™˜ì„± ì½”ë“œëŠ” ì´ì œ í•„ìš” ì—†ìŒ (ëª¨ë“  ì˜µì…˜ì— scoreê°€ ìˆê¸° ë•Œë¬¸)
      });
    
      // ê²°ê³¼ ìœ í˜• ê²°ì • (conditionì— ë”°ë¼ find)
      const result = resultTypes.find(r => r.condition(totalScore));
      
      // ê²°ê³¼ ì´ë¯¸ì§€ì™€ í…ìŠ¤íŠ¸ ì„¤ì •
      document.getElementById('resultImage').src = imageMap[result.name];
      document.getElementById('resultText').innerText = `${result.name}\n${result.desc}`;
    }

    // ê²°ê³¼ í…ìŠ¤íŠ¸ ë³µì‚¬ í•¨ìˆ˜
    function copyResult() {
      const text = document.getElementById('resultText').innerText;
      const url = window.location.href.split('?')[0]; // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì œì™¸í•˜ê³  í˜„ì¬ URL ê°€ì ¸ì˜¤ê¸°
      navigator.clipboard.writeText(`${text}\n\ní…ŒìŠ¤íŠ¸ í•´ë³´ê¸° ğŸ‘‰ ${url}`).then(() => {
        alert('ê²°ê³¼ì™€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”! ë¶™ì—¬ë„£ê¸°ë¡œ ê³µìœ í•´ë³´ì„¸ìš” ğŸ‰');
      }).catch(err => {
        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:', err);
        alert('ê²°ê³¼ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”!');
      });
    }

    // ì¹´ì¹´ì˜¤í†¡ ê³µìœ  í•¨ìˆ˜
    function shareKakao() {
      const resultTextElement = document.getElementById('resultText');
      if (!resultTextElement) {
        console.error("resultTextElement not found for Kakao Share");
        return;
      }
      const fullResultText = resultTextElement.innerText;
      const resultName = fullResultText.split('\n')[0]; // ê²°ê³¼ ìœ í˜•ë§Œ ì¶”ì¶œ
      const resultDesc = fullResultText.split('\n').slice(1).join('\n'); // ì„¤ëª… ë¶€ë¶„ ì¶”ì¶œ
      const resultImage = document.getElementById('resultImage').src;
      const currentUrl = window.location.href.split('?')[0]; // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì œì™¸

      if (!Kakao.isInitialized()) {
          console.error("Kakao SDK is not initialized.");
          return;
      }

      Kakao.Link.sendDefault({
        objectType: 'feed',
        content: {
          title: 'ë‚˜ëŠ” ê³µë¬´ì›ì„ ê³„ì†í•  ìƒì¸ê°€?',
          description: `í…ŒìŠ¤íŠ¸ ê²°ê³¼: ${resultName}\n${resultDesc}`, // ê²°ê³¼ ì´ë¦„ê³¼ ì„¤ëª… ëª¨ë‘ í¬í•¨
          imageUrl: resultImage,
          link: {
            mobileWebUrl: currentUrl,
            webUrl: currentUrl
          }
        },
        buttons: [
          {
            title: 'í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°',
            link: {
              mobileWebUrl: currentUrl,
              webUrl: currentUrl
            }
          }
        ]
      });
    }
  </script>
</body>
</html>      ] 
    },
    { 
      text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
      options: [
        { text: "ğŸ˜± ë²Œì¨ìš”?!", score: 1 },
        { text: "ğŸ¤” ê·¸ëƒ¥ ë³´ë‚´ì£¼ì„¸ìš”...", score: 2 },
        { text: "ğŸ§­ ì•„ì§ ì—¬ê¸´ ì–´ë”” ë‚˜ëŠ” ëˆ„êµ¬", score: 1 }
      ] 
    },
    { 
      text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
      options: [
        { text: "ğŸ“… ì›”ê¸‰ì¼", score: 1 },
        { text: "ğŸ§˜ ì£¼ë§ì— ì¶œê·¼ ì•ˆ í•  ë•Œ", score: 1 },
        { text: "ğŸ™‹ ì•„ì§ì€ ëª¨ë¥´ê² ì–´ìš”", score: 2 }
      ] 
    }
  ],
  "1~3ë…„": [
    { 
      text: "ìš”ì¦˜ ë™ë£Œë“¤ì´ë‘ì€ ì–´ë•Œ?", 
      options: [
        { text: "ğŸ˜Œ ê·¸ëƒ¥ì €ëƒ¥ ë¬´ë‚œ", score: 1 },
        { text: "ğŸ¤¬ ëˆˆì¹˜+ì •ì¹˜+í”¼ë¡œ ê·¸ ìì²´", score: 3 },
        { text: "ğŸ™ƒ ì¶œê·¼ë§Œ ë”°ë¡œ í•˜ê³  ì‹¶ì–´ìš”", score: 2 }
      ] 
    },
    { 
      text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
      options: [
        { text: "ğŸ§³ ë‹¤ë¥¸ ë¶€ì„œë„ ê°€ë³´ê³  ì‹¶ê¸´ í•¨", score: 1 },
        { text: "ğŸ˜¤ ëˆ„ê°€ ë‚˜ ë°€ì–´ë‚´ëŠ” ê±´ê°€?", score: 2 },
        { text: "ğŸ™ƒ ìµìˆ™í•œ ê²Œ ì¢‹ì•„ìš”", score: 0 }
      ] 
    },
    { 
      text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
      options: [
        { text: "ğŸ–ï¸ ì—°ê°€ ì“¸ ë•Œ", score: 1 },
        { text: "ğŸ˜ ì‹ ì…ë“¤ì´ ë¶€ëŸ¬ì›Œí•  ë•Œ", score: 0 },
        { text: "ğŸ§¾ ì œë„ë‚˜ ì ˆì°¨ ì˜ ì´í•´ë  ë•Œ", score: 0 }
      ] 
    }
  ],
  "4~7ë…„": [
    { 
      text: "ìš”ì¦˜ ë™ë£Œë“¤ì´ë‘ì€ ì–´ë•Œ?", 
      options: [
        { text: "ğŸ˜Œ ê·¸ëƒ¥ì €ëƒ¥ ë¬´ë‚œ", score: 1 },
        { text: "ğŸ¤¬ ëˆˆì¹˜+ì •ì¹˜+í”¼ë¡œ ê·¸ ìì²´", score: 3 },
        { text: "ğŸ™ƒ ì¶œê·¼ë§Œ ë”°ë¡œ í•˜ê³  ì‹¶ì–´ìš”", score: 2 }
      ] 
    },
    { 
      text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
      options: [
        { text: "ğŸ§³ ë‹¤ë¥¸ ë¶€ì„œë„ ê°€ë³´ê³  ì‹¶ê¸´ í•¨", score: 1 },
        { text: "ğŸ˜¤ ëˆ„ê°€ ë‚˜ ë°€ì–´ë‚´ëŠ” ê±´ê°€?", score: 2 },
        { text: "ğŸ™ƒ ìµìˆ™í•œ ê²Œ ì¢‹ì•„ìš”", score: 0 }
      ] 
    },
    { 
      text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
      options: [
        { text: "ğŸ–ï¸ ì—°ê°€ ì“¸ ë•Œ", score: 1 },
        { text: "ğŸ˜ ì‹ ì…ë“¤ì´ ë¶€ëŸ¬ì›Œí•  ë•Œ", score: 0 },
        { text: "ğŸ§¾ ì œë„ë‚˜ ì ˆì°¨ ì˜ ì´í•´ë  ë•Œ", score: 0 }
      ] 
    }
  ],
  "8ë…„ ì´ìƒ": [
    { 
      text: "ê³µì§ìƒí™œ 8ë…„ì°¨, ë‚˜ëŠ”...", 
      options: [
        { text: "ğŸ§˜ íë¦„ë§Œ ë³´ë©´ ë‹¤ ë³´ì—¬ìš”", score: 0 },
        { text: "ğŸ¤• í›„ë°°ë“¤ ë³´ë©´ ë‚´ê°€ ì˜›ë‚  ìƒê°ë‚˜ìš”", score: 1 },
        { text: "ğŸ”¥ ì¡°ì§ê°œí˜ì˜ ë¶ˆê½ƒì„ ë‹¤ì‹œ ì¼¤ê¹Œ?", score: 2 }
      ] 
    },
    { 
      text: "ë¶€ì„œ ì´ë™ ì–˜ê¸°ê°€ ë‚˜ì˜¤ë©´?", 
      options: [
        { text: "ğŸ§˜ ì–´ë””ë“  ìƒê´€ì—†ìŠµë‹ˆë‹¤", score: 0 },
        { text: "ğŸ¤– ì–´ì°¨í”¼ ë‹¤ ê±°ê¸°ì„œ ê±°ê¸°", score: 2 },
        { text: "ğŸ” ë°˜ë³µë˜ëŠ” ì¸ì‚¬ì´ë™â€¦ ì´ì œ ì²´ë…", score: 3 }
      ] 
    },
    { 
      text: "ê³µë¬´ì› ë˜ê¸¸ ì˜í–ˆë‹¤ê³  ëŠë‚„ ë•ŒëŠ”?", 
      options: [
        { text: "ğŸ‘ ë‚¨ë“¤ì´ ë¶€ëŸ¬ì›Œí•  ë•Œ", score: 0 },
        { text: "ğŸ¤“ ì •ì±… íë¦„ì´ ìˆ ìˆ  ì½í ë•Œ", score: 0 },
        { text: "ğŸ’° ì •ë…„ì´ ë³´ì¥ë  ë•Œ", score: 1 }
      ] 
    }
  ]
};

// q2Mapë„ ì ìˆ˜ ì²´ê³„ë¡œ ìˆ˜ì •
const q2Map = {
  "1ë…„ ë¯¸ë§Œ": {
    text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
    options: [
      { text: "ì•„ì§ë„ í—·ê°ˆë ¤ìš”...", score: 1 },
      { text: "í˜¹ì‹œ ì´ê²ƒë„ ì œê°€ í• ê¹Œìš”?", score: 0 },
      { text: "ë§¤ë‰´ì–¼ì´ë‘ ì‹¤ì œê°€ ë„ˆë¬´ ë‹¬ë¼ìš”", score: 2 },
      { text: "ì˜¤â€¦ì´ê±¸ ì €í•œí…Œìš”?", score: 1 }
    ]
  },
  "1~3ë…„": {
    text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
    options: [
      { text: "ê·¸ê±´ ì œê°€ ë‹´ë‹¹ì´ ì•„ë‹Œë°ìš”â€¦", score: 1 },
      { text: "ê²°ì¬ ë“œë ¸ìŠµë‹ˆë‹¤", score: 0 },
      { text: "ì´ê±° ì™œ ë˜ ë°”ê¼ˆì–´ìš”?", score: 2 },
      { text: "ë§¤ë‰´ì–¼ ì–´ë”” ìˆì–´ìš”?", score: 1 }
    ]
  },
   "4~7ë…„": {
    text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
    options: [
      { text: "ê·¸ê±´ ì œê°€ ë‹´ë‹¹ì´ ì•„ë‹Œë°ìš”â€¦", score: 1 },
      { text: "ê²°ì¬ ë“œë ¸ìŠµë‹ˆë‹¤", score: 0 },
      { text: "ì´ê±° ì™œ ë˜ ë°”ê¼ˆì–´ìš”?", score: 2 },
      { text: "ë§¤ë‰´ì–¼ ì–´ë”” ìˆì–´ìš”?", score: 1 }
    ]
  },
  "8ë…„ ì´ìƒ": {
    text: "ìš”ì¦˜ ë‹¹ì‹  ì…ì—ì„œ ìì£¼ ë‚˜ì˜¤ëŠ” ë§ì€?",
    options: [
      { text: "ê·¸ê±° ì˜›ë‚ ì—ë„ ë¬¸ì œ ìˆì—ˆì–´", score: 1 },
      { text: "ë‚´ê°€ ë§í–ˆì–ì•„ ê·¸ë•Œ", score: 1 },
      { text: "ë˜ ë°”ë€Œì—ˆëŒ€ìš”. ì§€ì¹¨ ë‚´ë ¤ì˜¨ëŒ€", score: 1 },
      { text: "ì•ˆ ê·¸ë˜ë„ ë³´ê³  ìˆì—ˆì–´ìš”", score: 0 }
    ]
  }
};

// ê²°ê³¼ ìœ í˜•ì˜ ì¡°ê±´ë„ ì ìˆ˜ ê¸°ë°˜ìœ¼ë¡œ ë³€ê²½
const resultTypes = [
  {
    name: 'ì²œì§í˜• ğŸŒŸ',
    desc: 'ì•ˆì •ê³¼ ë£¨í‹´ì„ ì‚¬ë‘í•˜ëŠ” ì²œì§í˜•! ë‹¹ì‹ ì€ ê³µì§ DNA ê·¸ ìì²´ì…ë‹ˆë‹¤.',
    condition: a => a <= 5 // 5ì  ì´í•˜ëŠ” ì²œì§í˜•
  },
  {
    name: 'ë‚´ë©´ ë¶„íˆ¬í˜• ğŸŒ€',
    desc: 'ê²‰ìœ¼ë¡œëŠ” ë©€ì©¡, ì†ì€ ë³µì¡í•œ ê³ ë¯¼ì˜ ì—°ì†. ëŠ˜ ì¶œê·¼ê¸¸ì— ìƒê°ì´ ë§ë‹¤.',
    condition: a => a <= 10 // 6~10ì ì€ ë‚´ë©´ ë¶„íˆ¬í˜•
  },
  {
    name: 'ê°ˆíŒ¡ì§ˆíŒ¡í˜• ğŸ¤¹â€â™€ï¸',
    desc: 'ì´ì§ê³¼ ì•ˆì • ì‚¬ì´ì—ì„œ ê³ ë¯¼ ì¤‘. ë§¤ì¼ ì¶œê·¼ ì „ í•œìˆ¨ì„ ì‰°ë‹¤ë©´ ë‹¹ì‹ !',
    condition: a => a <= 15 // 11~15ì ì€ ê°ˆíŒ¡ì§ˆíŒ¡í˜•
  },
  {
    name: 'ë²ˆì•„ì›ƒí˜• ğŸ”¥',
    desc: 'ì´ë¯¸ ë§ˆìŒì€ í‡´ì‚¬ ì¤‘... í˜„ì‹¤ì€ ê³„ì† ê·¼ë¬´ ì¤‘... íœ´ì‹ì´ í•„ìš”í•´ìš”!',
    condition: a => a <= 20 // 16~20ì ì€ ë²ˆì•„ì›ƒí˜•
  },
  {
    name: 'í‡´ì‚¬ê°í˜• ğŸ’£',
    desc: 'ì§€ê¸ˆ ì•ˆ ê·¸ë§Œë‘ë©´ ë³‘ë‚  ê²ƒ ê°™ë‹¤ë©´? ì´ í…ŒìŠ¤íŠ¸ ëë‚˜ê³  ë°”ë¡œ ëª…ìƒ ã„±',
    condition: a => a > 20 // 21ì  ì´ìƒì€ í‡´ì‚¬ê°í˜•
  }
];

// showNextQuestion í•¨ìˆ˜ ìˆ˜ì •
function showNextQuestion() {
  const qWrap = document.getElementById('questions');
  qWrap.innerHTML = '';

  if (currentQuestion >= baseQuestions.length) {
    showResult();
    return;
  }

  const qData = baseQuestions[currentQuestion];

  let finalQ = qData;
  if (qData.branch) {
    const branchSet = branchQuestions[userInfo.experience];
    finalQ = branchSet.shift();
  }

  const qDiv = document.createElement('div');
  qDiv.className = 'container show';

  const qTitle = document.createElement('p');
  qTitle.innerHTML = `<strong>Q${currentQuestion + 1}.</strong> ${finalQ.text}`;
  qDiv.appendChild(qTitle);

  // ê° ì˜µì…˜ì˜ ë²„íŠ¼ ìƒì„± (ì ìˆ˜ ì²´ê³„ ë°˜ì˜)
  if (Array.isArray(finalQ.options)) {
    // ê¸°ì¡´ ë°©ì‹ì˜ ì˜µì…˜ ë°°ì—´ì¸ ê²½ìš°
    finalQ.options.forEach((opt, index) => {
      const btn = document.createElement('button');
      btn.innerText = opt;
      btn.onclick = () => {
        // ê¸°ë³¸ ì ìˆ˜ëŠ” indexì— ë”°ë¼ 0ë¶€í„° ì¦ê°€
        answers.push({ text: opt, score: index });
        currentQuestion++;
        qDiv.remove();
        showNextQuestion();
      };
      qDiv.appendChild(btn);
    });
  } else {
    // ìƒˆë¡œìš´ ì ìˆ˜ ì²´ê³„ê°€ ì ìš©ëœ ì˜µì…˜ ê°ì²´ ë°°ì—´ì¸ ê²½ìš°
    finalQ.options.forEach(opt => {
      const btn = document.createElement('button');
      btn.innerText = opt.text;
      btn.onclick = () => {
        answers.push(opt);
        currentQuestion++;
        qDiv.remove();
        showNextQuestion();
      };
      qDiv.appendChild(btn);
    });
  }

  qWrap.appendChild(qDiv);
}

// showResult í•¨ìˆ˜ ìˆ˜ì •
function showResult() {
  document.getElementById('questions').innerHTML = '';
  document.getElementById('result').classList.add('show');

  // ì´ì  ê³„ì‚°
  let totalScore = 0;
  answers.forEach(answer => {
    if (typeof answer === 'object' && 'score' in answer) {
      totalScore += answer.score;
    } else if (typeof answer === 'string') {
      // ê¸°ì¡´ ë°©ì‹ í˜¸í™˜ì„± ìœ ì§€ (burnoutKeywords ê²€ì‚¬)
      const hasKeyword = burnoutKeywords.some(word => answer.includes(word));
      if (hasKeyword) totalScore += 1;
    }
  });

  // ê²°ê³¼ ìœ í˜• ê²°ì •
  const result = resultTypes.find(r => r.condition(totalScore));

  document.getElementById('resultImage').src = imageMap[result.name];
  document.getElementById('resultText').innerText = `${result.name}\n${result.desc}`;
}

// saveUserInfo í•¨ìˆ˜ë„ ìˆ˜ì •
function saveUserInfo() {
  const exp = document.getElementById('experience').value;
  userInfo = { experience: exp };
  
  // q2Mapì„ ìƒˆë¡œìš´ ì ìˆ˜ ì²´ê³„ì— ë§ê²Œ ì ìš©
  const q2Data = q2Map[exp];
  baseQuestions[1] = {
    text: q2Data.text,
    options: q2Data.options.map((text, index) => ({ text, score: index }))
  };
  
  document.getElementById('userinfo').classList.remove('show');
  document.getElementById('intro').classList.add('show');
}
    // ê¸°ì¡´ì˜ showNextQuestion í•¨ìˆ˜ë¥¼ ìƒˆë¡œìš´ ì ìˆ˜ ì²´ê³„ì— ë§ê²Œ ìˆ˜ì •
function showNextQuestion() {
  const qWrap = document.getElementById('questions');
  qWrap.innerHTML = '';

  if (currentQuestion >= baseQuestions.length) {
    showResult();
    return;
  }

  const qData = baseQuestions[currentQuestion];

  let finalQ = qData;
  if (qData.branch) {
    const branchSet = branchQuestions[userInfo.experience];
    finalQ = branchSet.shift();
  }

  const qDiv = document.createElement('div');
  qDiv.className = 'container show';

  const qTitle = document.createElement('p');
  qTitle.innerHTML = `<strong>Q${currentQuestion + 1}.</strong> ${finalQ.text}`;
  qDiv.appendChild(qTitle);

  // ìƒˆë¡œìš´ ì˜µì…˜ í˜•ì‹ ì²˜ë¦¬
  if (Array.isArray(finalQ.options) && typeof finalQ.options[0] === 'object') {
    // ìƒˆë¡œìš´ í˜•ì‹: ê°ì²´ ë°°ì—´ [{text: "í…ìŠ¤íŠ¸", score: ì ìˆ˜}]
    finalQ.options.forEach(opt => {
      const btn = document.createElement('button');
      btn.innerText = opt.text;
      btn.onclick = () => {
        answers.push(opt); // ê°ì²´ ì „ì²´ë¥¼ ì €ì¥
        currentQuestion++;
        qDiv.remove();
        showNextQuestion();
      };
      qDiv.appendChild(btn);
    });
  } else {
    // ê¸°ì¡´ í˜•ì‹: ë¬¸ìì—´ ë°°ì—´ ["í…ìŠ¤íŠ¸1", "í…ìŠ¤íŠ¸2"]
    finalQ.options.forEach((opt, index) => {
      const btn = document.createElement('button');
      btn.innerText = opt;
      btn.onclick = () => {
        // ì´ì „ ë°©ì‹ í˜¸í™˜ì„± ìœ ì§€
        answers.push({text: opt, score: index});
        currentQuestion++;
        qDiv.remove();
        showNextQuestion();
      };
      qDiv.appendChild(btn);
    });
  }

  qWrap.appendChild(qDiv);
}

// ê²°ê³¼ ê³„ì‚° í•¨ìˆ˜ ìˆ˜ì •
function showResult() {
  document.getElementById('questions').innerHTML = '';
  document.getElementById('result').classList.add('show');

  // ì´ì  ê³„ì‚°
  let totalScore = 0;
  answers.forEach(answer => {
    if (typeof answer === 'object' && 'score' in answer) {
      totalScore += answer.score;
    } else if (typeof answer === 'string') {
      // ê¸°ì¡´ ë°©ì‹ í˜¸í™˜ì„± ìœ ì§€ (burnoutKeywords ê²€ì‚¬)
      const hasKeyword = burnoutKeywords.some(word => answer.includes(word));
      if (hasKeyword) totalScore += 1;
    }
  });

  // ê²°ê³¼ ìœ í˜• ê²°ì •
  const result = resultTypes.find(r => r.condition(totalScore));

  document.getElementById('resultImage').src = imageMap[result.name];
  document.getElementById('resultText').innerText = `${result.name}\n${result.desc}`;
}

// ê²°ê³¼ ë³µì‚¬ í•¨ìˆ˜
function copyResult() {
  const text = document.getElementById('resultText').innerText;
  const url = window.location.href;
  navigator.clipboard.writeText(`${text}\n\ní…ŒìŠ¤íŠ¸ í•´ë³´ê¸° ğŸ‘‰ ${url}`).then(() => {
    alert('ê²°ê³¼ì™€ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆì–´ìš”! ë¶™ì—¬ë„£ê¸°ë¡œ ê³µìœ í•´ë³´ì„¸ìš” ğŸ‰');
  });
}

// ì¹´ì¹´ì˜¤í†¡ ê³µìœ  í•¨ìˆ˜
function shareKakao() {
  Kakao.Link.sendDefault({
    objectType: 'feed',
    content: {
      title: 'ë‚˜ëŠ” ê³µë¬´ì›ì„ ê³„ì†í•  ìƒì¸ê°€?',
      description: 'í…ŒìŠ¤íŠ¸ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!',
      imageUrl: 'https://raw.githubusercontent.com/jjinooh/gongmoo-dna-assets/refs/heads/main/unnamed.png',
      link: {
        mobileWebUrl: window.location.href,
        webUrl: window.location.href
      }
    },
    buttons: [
      {
        title: 'í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°',
        link: {
          mobileWebUrl: window.location.href,
          webUrl: window.location.href
        }
      }
    ]
  });
}
  </script></body>
</html>
